(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{380:function(e,t,s){},639:function(e,t,s){"use strict";s(380)},650:function(e,t,s){"use strict";s.r(t);var r=s(22),n=s(350),a=(s(55),s(352),s(600),s(11),s(602),s(607),s(609),s(610),s(611),s(613),s(614),s(615),s(616),s(617),s(618),s(619),s(620),s(622),s(623),s(624),s(625),s(626),s(627),s(628),s(629),s(634),s(635),s(636),s(637),s(204),s(82)),c=s(176),i=s(647),o=s(638),l=s.n(o),u={data:function(){return{expire:!1,src:"",date:"",ctrl:process.isClient&&parseInt(localStorage.getItem("ctrl"))||""}},mounted:function(){clearInterval(this.ctrl)},watch:{show:function(e){e&&this.getImg()}},computed:Object(n.a)({},Object(a.d)({show:function(e){return e.qrcodeShow}})),methods:{getImg:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var s,r,n,a,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(s=process.isClient?localStorage.getItem("scene"):"")?e.scene=s:(e.scene=Object(i.a)(),process.isClient&&localStorage.setItem("scene",e.scene)),e.expire=!1,t.next=5,Object(c.a)({scene:e.scene});case 5:for(r=t.sent,n=new Uint8Array(r),a="",o=n.byteLength,l=0;l<o;l++)a+=String.fromCharCode(n[l]);e.src="data:image/png;base64,"+window.btoa(a),e.date=new Date,e.checkLogin();case 13:case"end":return t.stop()}}),t)})))()},checkLogin:function(){var e=this;this.ctrl=setInterval(Object(r.a)(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.c)({scene:e.scene});case 2:200===(s=t.sent).code&&s.data&&s.data.username&&(e.$store.commit("setUserInfo",s.data),e.$store.commit("setToken",s.token),e.$store.commit("setRefreshToken",s.refreshToken),e.hide()),Math.abs(l()(e.date).diff(l()()))>12e4&&(clearInterval(e.ctrl),e.expire=!0);case 6:case"end":return t.stop()}}),t)}))),2e3),process.isClient&&localStorage.setItem("ctrl",this.ctrl)},hide:function(){clearInterval(this.ctrl),this.$store.commit("setCodeShow",!1)}}},d=(s(639),s(29)),m=Object(d.a)(u,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.show?s("div",{on:{click:e.hide}},[s("div",{staticClass:"wrapper"},[s("div",{staticClass:"info"},[e._v("打开微信扫一扫")]),e._v(" "),s("div",{staticClass:"box"},[s("div",{staticClass:"qrcode"},[s("img",{directives:[{name:"show",rawName:"v-show",value:e.src,expression:"src"}],staticClass:"box-img",attrs:{src:e.src,alt:"qrcode"}}),e._v(" "),e.expire?s("div",{staticClass:"tips-mask"},[s("p",[e._v("小程序二维码状态已过期")])]):e._e()]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.expire,expression:"expire"}],staticClass:"resend",on:{click:function(t){return t.stopPropagation(),e.getImg.apply(null,arguments)}}},[e._v("\n        重新获取二维码\n      ")])])]),e._v(" "),s("div",{staticClass:"mask"})]):e._e()}),[],!1,null,"7e49a830",null);t.default=m.exports}}]);